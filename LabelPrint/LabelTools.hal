//Edit***************************Sasha2,17:22 24.10.2014 {procedure PopulateAndSaveMultipleQtyPURow(var array record PUVc PU2r,string item,val price,val qty,var array Integer rownr,integer index,string prlist)begin  record PUVc PU3r;  row PUVc PU3rw,PU2rw;  integer temprownr;  boolean found;  integer mtrw,i,pos;  val tempqty;    	tempqty = qty;  	found = false;  	temprownr = rownr[index];	if (temprownr<1) then begin		RECORDNEW(PU3r);		if (NonBlank(prlist)) then begin			PU3r.LangCode = prlist; //price list		end;	end else begin		PU3r = PU2r[index];	end;	mtrw = matrowcnt(PU3r);	For(i=0;i<mtrw;i=i+1) begin	  matrowget(PU3r,i,PU2rw);	  if(PU2rw.ArtCode==item)then begin	  	pos = i;	  	found = true;	  	i = mtrw;	  end;	end; 	if(!found)then begin		pos = mtrw - 1;	end;	pos = pos + 1;	PU3rw.ArtCode = item;	PU3rw.UPrice = price;	while (tempqty>0) begin		MatRowInsert(PU3r,pos,PU3rw);		pos = pos + 1;		temprownr = temprownr + 1;		tempqty = tempqty - 1;	end;	rownr[index] = temprownr;	PU2r[index] = PU3r;  return;end; //Edit***************************Sasha2,17:22 24.10.2014 }global //Edit***************************Sasha2,17:38 13.10.2014 {procedure PrepareMultipleQtyPUVcLabelItems(record PUVc PUr,var array record PUVc PU2r,var array Integer rownr,string prlist)BEGIN  row PUVc PUrw;  record INVc INr;  Integer i,rwcnt;     rwcnt = MatRowCnt(PUr);    for (i=0;i<rwcnt;i=i+1) begin    	MatRowGet(PUr,i,PUrw);    	INr.Code = PUrw.ArtCode;    	if (nonblank(PUrw.ArtCode) and ReadFirstMain(INr,1,true)) then begin    		PopulateAndSaveMultipleQtyPURow(PU2r,PUrw.ArtCode,PUrw.UPrice,PUrw.Quant,rownr,0,prlist);    	end;    end;      RETURN;END; //Edit***************************Sasha2,17:38 13.10.2014 } global //Edit***************************Sasha2,16:14 26.01.2015 {procedure HandlePrintEAN13PU(record PUVc PUr)begin  array record PUVc PU2r;  Integer i;  array integer rownr;  boolean previewf;      	/*switch (RepSpec.ArtMode) begin  		case 0: previewf = false;  		case 1: previewf = true;  	end;*/  	previewf = false;		PrepareMultipleQtyPUVcLabelItems(PUr,PU2r,rownr,"");  	if (rownr[0]>0) then begin  		PrintDocument(PU2r[0],"ItemLabForm9",previewf);  	end;    return;end; //Edit***************************Sasha2,16:14 26.01.2015 }